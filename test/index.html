<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>jQuery - XenAPI - XMLRPC - Example</title>
	<script src="../lib/jquery-1.9.1.js"></script>
	<script src="../lib/jquery.xmlrpc-0.2.0.js"></script>
	<script src="../xenapi.js"></script>

</head>
<body>
	<form id="test" action="#">
		<input type="text" id="hosturl" value="dt59" placeholder="Host" />
		<input type="text" id="user" value="root" placeholder="User" />
		<input type="text" id="pass" value="xenroot" placeholder="Pass" />
		<input type="submit" value="Connect" />
	</form>
	<br />
	<div id="output">
	</div>

	<script>

		$('#test').submit(function(e) {
			e.preventDefault();

			var username = $('#user').val();
			var password = $('#pass').val();
			var hostUrl = $('#hosturl').val();
			var test = new xenapi(username,password,hostUrl);
			var output = $('#output');
			output.html('Loading...');
			test.getServerVersion(function(err,res) {

			if(err) {
				console.log(err);
				output.html(err);
			} else {
				console.log(res);
				output.html(res);
			}


			});

			var tryout = test.VM.get_all;
			var demo = test.getSession();
			console.log(tryout);
		});
		
	</script>
</body>
</html>
