<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>jQuery - XenServer Management API - Test</title>
	<script src="../lib/jquery-1.9.1.js"></script>
	<script src="../lib/jquery.xmlrpc-0.2.0.js"></script>
	<script src="../xsapi.js"></script>

</head>
<body>
	<form id="test" action="#">
		<input type="text" id="hosturl" placeholder="Host" />
		<input type="text" id="user" placeholder="User" />
		<input type="text" id="pass" placeholder="Pass" />
		<input type="submit" value="Connect" />
	</form>
	<br />
	<div id="output">
	</div>

	<script>

		$('#test').submit(function(e) {
			e.preventDefault();

			var username = $('#user').val();
			var password = $('#pass').val();
			var hostUrl = $('#hosturl').val();
			var test = new xsapi(username,password,hostUrl);
			var output = $('#output');
			output.html('Loading...');
			test.getServerVersion(function(err,res) {

			if(err) {
				console.log(err);
				output.html(err);
			} else {
				console.log(res);
				output.html(res);
			}
		});
		});
		
	</script>
</body>
</html>
